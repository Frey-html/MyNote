在VS Code 中，当你点击 **运行** 或 **调试** 一个 C++ 文件时，它会使用内部的 **任务系统** 和 **调试配置** 来编译并运行程序。关键配置文件主要是 `launch.json` 和 `tasks.json`。你可以根据自己的项目需求对这些文件进行自定义设置。

### 配置文件：
1. **`tasks.json`**：用于定义编译任务。
2. **`launch.json`**：用于配置调试器，控制如何运行程序以及调试时的行为。

### 如何配置编译和运行

#### 1. **`tasks.json`**（编译配置）
当你按下“运行”或“调试”按钮时，VS Code 会首先调用编译任务（即 `tasks.json` 中的编译配置）。

示例 `tasks.json` 文件，用于编译 C++ 文件：
```json
{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "C++ Build",                // 任务的标签
            "type": "shell",                    // 任务类型：shell脚本
            "command": "C:/mingw64/bin/g++.exe", // 编译器路径（根据你的编译器修改）
            "args": [
                "-g",                            // 生成调试信息
                "${file}",                       // 当前被运行的C++文件
                "-o", "${fileDirname}/${fileBasenameNoExtension}.exe" // 输出文件路径
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "problemMatcher": ["$gcc"],          // 错误格式匹配
            "detail": "Task generated by VS Code."
        }
    ]
}
```
- **`-g`**：生成调试信息，以便调试器使用。
- **`${file}`**：当前打开的文件路径。
- **`${fileDirname}`**：当前文件所在的文件夹。
- **`${fileBasenameNoExtension}`**：文件名不带扩展名，用于生成可执行文件。

#### 2. **`launch.json`**（调试配置）
`launch.json` 文件用于配置调试器行为。当你点击“调试”时，VS Code 会使用此配置来启动调试器。

示例 `launch.json` 文件：
```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "C++ Debug",                // 配置的名字
            "type": "cppdbg",                   // 调试类型，C++调试使用"cppdbg"
            "request": "launch",                // 启动模式（launch or attach）
            "program": "${fileDirname}/${fileBasenameNoExtension}.exe", // 程序路径
            "args": [],                         // 程序的命令行参数（如果有）
            "stopAtEntry": false,               // 是否在程序入口处停止
            "cwd": "${workspaceFolder}",        // 当前工作目录
            "environment": [],
            "externalConsole": true,            // 是否使用外部控制台
            "MIMode": "gdb",                    // 使用的调试器模式（gdb）
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                }
            ],
            "preLaunchTask": "C++ Build",       // 在启动调试器之前执行的编译任务
            "miDebuggerPath": "C:/mingw64/bin/gdb.exe", // gdb 调试器路径
            "logging": {
                "trace": true,
                "traceResponse": true
            },
            "internalConsoleOptions": "neverOpen" // 不打开内部控制台
        }
    ]
}
```
- **`program`**：要调试的可执行文件路径。
- **`preLaunchTask`**：设置为`tasks.json`中的编译任务标签，在调试之前自动执行编译。
- **`miDebuggerPath`**：GDB 调试器的路径，确保指向正确的 GDB 可执行文件。
- **`externalConsole`**：设置为`true`以使用外部控制台（通常用于显示程序的标准输出）。

### 如何运行和调试

1. **点击运行**：
   - 当你在 VS Code 中点击 **运行（Run）** 按钮时，VS Code 会使用`tasks.json`配置文件中的编译任务来编译你的 C++ 文件。
   - 编译成功后，它会根据`launch.json`中的配置执行生成的可执行文件。

2. **点击调试**：
   - 当你点击 **调试（Debug）** 按钮时，VS Code 首先执行编译任务（`tasks.json`中的`C++ Build`任务）。
   - 然后，VS Code 会根据`launch.json`配置启动 GDB 或其他调试器，加载生成的可执行文件进行调试。

### 其他优化

- **使用快捷键**：
   - **运行**：按 `Ctrl + F5` 可以直接运行当前程序。
   - **调试**：按 `F5` 可以开始调试当前程序。

- **配置调试时的命令行参数**：
   如果需要传递命令行参数，可以在 `launch.json` 的 `args` 部分填写，例如：
   ```json
   "args": ["arg1", "arg2"]
   ```

通过以上配置，你可以顺利地在 VS Code 中编译、运行和调试 C++ 项目。