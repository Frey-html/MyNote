应用层的 TCP 和 UDP 协议是网络通信中常用的传输层协议，它们各自有不同的特点和适用场景。下面是对这两种协议的分析。
![[Pasted image 20241015083012.png]]
#review

[【计算机网络】彻底搞懂TCP和UDP的区别](https://blog.csdn.net/g310773517/article/details/140914218)
### TCP（传输控制协议）

#### 特点：
1. **连接导向**：在发送数据之前，必须先建立连接（通过三次握手）。
2. **可靠性**：TCP 提供数据传输的可靠性，确保数据包按顺序到达，且没有丢失。
3. **流量控制**：使用滑动窗口机制来控制发送速率，避免接收端被淹没。
4. **拥塞控制**：能够根据网络状况动态调整发送速率，避免网络拥堵。
5. **有序传输**：数据包按发送顺序到达接收端。

#### 适用场景：
- **文件传输**：如 FTP、HTTP（网页浏览）、SFTP 等。
- **电子邮件**：如 SMTP、IMAP、POP 3。
- **实时应用**：如在线聊天、视频会议（当可靠性优先于延迟时）。

### UDP（用户数据报协议）

#### 特点：
1. **无连接**：UDP 是一种无连接协议，不需要建立连接，直接发送数据。
2. **不可靠性**：不保证数据包的到达、顺序或完整性，数据包可能丢失或重复。
3. **低延迟**：由于没有握手和拥塞控制，UDP 具有较低的延迟。
4. **数据包大小限制**：UDP 数据包大小有限制（最大 65,535 字节），通常建议不超过 1,500 字节（MTU）。
5. **简单性**：UDP 头部开销小，结构简单。

#### 适用场景：
- **实时应用**：如 VoIP（语音通话）、视频流（如直播）、在线游戏（需要低延迟）。
- **广播和组播**：如 DNS（域名解析）、DHCP（动态主机配置协议）。
- **监控和状态更新**：如 SNMP（简单网络管理协议）。



### 比较
UDP（用户数据报协议）和 TCP（传输控制协议）之间的主要区别如下：
![[Pasted image 20241015083240.png]]
![[Pasted image 20241015083248.png]]

#### 1. 连接方式
- **TCP**: 面向连接，建立连接后进行数据传输，确保数据完整性。
- **UDP**: 无连接，数据包直接发送，不需要建立连接。

#### 2. 可靠性
- **TCP**: 提供可靠的数据传输，确保数据按顺序到达，没有丢失或重复。
- **UDP**: 不保证数据传输的可靠性，可能会丢包、乱序或重复。

#### 3. 速度
- **TCP**: 较慢，由于建立连接、流量控制和错误检测等开销。
- **UDP**: 较快，因其简单的协议和无连接特性。

#### 4. 数据包大小
- **TCP**: 没有固定的大小限制，但有流量控制。
- **UDP**: 每个数据报最大为 65,535 字节。

#### 如何让 UDP 可靠

1. **应用层重传机制**: 在应用层实现重传逻辑，检测丢包并重新发送数据。

2. **顺序控制**: 使用序列号为每个数据包编号，确保接收端可以重新排序。

3. **确认应答**: 接收方发送确认应答（ACK）给发送方，未收到确认的包可以重传。

4. **超时机制**: 设置超时，当未收到确认时重新发送数据。

5. **冗余数据**: 发送冗余数据，增加数据的完整性，允许接收方根据冗余信息修复数据。

通过这些方法，可以在使用 UDP 时提高数据传输的可靠性。

### 总结
- **TCP** 适用于需要可靠性和顺序的应用，如文件传输和电子邮件。
- **UDP** 更适合需要快速传输和低延迟的场景，如在线游戏和实时音视频通信。

选择合适的协议主要取决于应用的需求，既要考虑可靠性，也要考虑延迟。如果你还有其他问题或需要更深入的分析，请告诉我！
